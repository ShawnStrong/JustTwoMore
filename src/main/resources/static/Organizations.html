<!DOCTYPE html>
<html>
<head>
    <title>JOM - Organizations</title>
	
	<link rel="stylesheet" type="text/css" href="org.css">
    
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <script src="http://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
	


	
	<script>
		// look at DataTable for good examples of implementing table libs
		// https://datatables.net/examples/styling/jqueryUI.html
		/*$(document).ready(function() {
			$('#example').DataTable( {
				"ajax": '../ajax/data/arrays.txt'
			} );
		} );*/
		function makeTable(container, data) {
			var table = $("<table>");
			//var table = $("<tr>");
			// need to figure out a way to dynamically add headers to table
			table.append("<tr><th>org_id</th><th>org_name</th><th>contact_name</th><th>contact_number</th><th>contact_email</th><th>notes</th></tr>");
			$.each(data, function(rowIndex, r) {
				var row = $("<tr>");
				/*$.each(r, function(colIndex, c) {
					if (rowIndex == 0) {
						row.append($("<th/>").text(colIndex));
					}
				});
				row.append("</tr>");
				row.append("<tr>");*/
				$.each(r, function(colIndex, c) { 

					row.append($("<td/>").text(c));
				});
				row.append("</tr>");
				table.append(row);
			});
			table.append("</table>");
			return container.append(table);
		}
		
		$(document).ready(function() {
			$( "#button1" ).click(function() {
                $('table').remove();
				$.ajax({
					url: "http://localhost:8080/org/list2",
					type: "GET",
					dataType: "json"
				})
				.done(function(data) {
					//alert( "Data: " + JSON.stringify(data) );
					var orgTable = makeTable($(document.body) , data);
					//$(document.body).append(JSON.stringify(data));
				})
				.fail(function(xhr, status, errorThrown) {
					alert( "Sorry, there was a problem!" );
					console.log( "Error: " + errorThrown );
					console.log( "Status: " + status );
					console.dir( xhr );
				});
			});
		});
				
    </script>
    
</head>
<body>
    
    <nav class="navbar navbar-inverse">
      <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="Console.html">Just One More Ministry</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
          <ul class="nav navbar-nav">
            <li><a href="Organizations.html">Organizations</a></li>
            <li><a href="Donations.html">Donations</a></li>
            <li><a href="Reports.html">Reports</a></li>
          </ul>
        </div><!-- /.navbar-collapse -->
      </div><!-- /.container-fluid -->
    </nav>
    

	<form method="get" action="/org/list">
		<button type="submit">List yo doods</button>
	</form><br>
	
    <form action="/org/create">
        Partner:<br>
        <input type="text" name="org_name" value="" required>
        <br>
        Contact name:<br>
        <input type="text" name="contact_name" value="" required>
        <br>
        Contant phone:<br>
        <input type="text" name="contact_number" value="" required>
		<br>
        Contant email:<br>
        <input type="text" name="contact_email" value="" required>
		<br>
		Description:<br>
        <input type="text" name="notes" value="" required>
        <br><br>
        <input type="submit" value="Submit">
    </form>
<!--    <a href='Console.html' class='button'>back</a><br>-->
	
	<button type="button" id="button1"> Click moi! </button><br>
	
</body>
</html>